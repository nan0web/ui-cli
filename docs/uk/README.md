# @nan0web/ui-cli

–ú–∞–ª–µ–Ω—å–∫–∏–π, –±–µ–∑–∑–∞–ª–µ–∂–Ω–∏–π UI‚Äë–∞–¥–∞–ø—Ç–µ—Ä –≤–≤–æ–¥—É –¥–ª—è JavaScript‚Äë–ø—Ä–æ—î–∫—Ç—ñ–≤.  
–ù–∞–¥–∞—î CLI‚Äë—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é, —è–∫—É –ª–µ–≥–∫–æ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ —É –ª–æ–≥—ñ–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

|[–°—Ç–∞—Ç—É—Å](https://github.com/nan0web/monorepo/blob/main/system.md#–Ω–∞–ø–∏—Å–∞–Ω–Ω—è-—Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤)|–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è|–¢–µ—Å—Ç–æ–≤–µ –ø–æ–∫—Ä–∏—Ç—Ç—è|–§—ñ—á—ñ|–í–µ—Ä—Å—ñ—è npm|
|---|---|---|---|---|
|üü¢ `96.1%`|üß™ [English üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø](https://github.com/nan0web/ui-cli/blob/main/README.md)<br />[–£–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é üá∫üá¶](https://github.com/nan0web/ui-cli/blob/main/docs/uk/README.md)|üü° `77.9%`|‚úÖ d.ts üìú system.md üïπÔ∏è playground|‚Äî|

## –û–ø–∏—Å

–ü–∞–∫–µ—Ç `@nan0web/ui-cli` –Ω–∞–¥–∞—î –Ω–∞–±—ñ—Ä —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–≤–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ CLI —á–µ—Ä–µ–∑
—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∏, –≤–∏–±—ñ—Ä –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–∏.
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–∞—Ç–µ—Ä–Ω –∞–¥–∞–ø—Ç–µ—Ä–∞ –¥–ª—è –±–µ–∑—à–æ–≤–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ –º–æ–¥–µ–ª—è–º–∏ –¥–∞–Ω–∏—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

### –û—Å–Ω–æ–≤–Ω—ñ –∫–ª–∞—Å–∏

- **`CLIInputAdapter`** ‚Äî –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç–∏ —Ñ–æ—Ä–º, –≤–≤–æ–¥—É —Ç–∞ –≤–∏–±–æ—Ä—É –≤ CLI.  
- **`Input`** ‚Äî –æ–±–≥–æ—Ä—Ç–∞—î –≤–≤–µ–¥–µ–Ω–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ —Å—Ç–∞—Ç—É—Å —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è.  
- **`CancelError`** ‚Äî –≤–∏–∫–∏–¥–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–∫–∞—Å–æ–≤—É—î –æ–ø–µ—Ä–∞—Ü—ñ—é.

–¶—ñ –∫–ª–∞—Å–∏ —ñ–¥–µ–∞–ª—å–Ω—ñ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—ñ–¥–∫–∞–∑–æ–∫, –º–∞–π—Å—Ç—Ä—ñ–≤, —Ñ–æ—Ä–º —Ç–∞ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ CLI –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ –Ω–∞–∫–ª–∞–¥–Ω–∏–º–∏ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏.

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ß–µ—Ä–µ–∑ npm
```bash
npm install @nan0web/ui-cli
```

### –ß–µ—Ä–µ–∑ pnpm
```bash
pnpm add @nan0web/ui-cli
```

### –ß–µ—Ä–µ–∑ yarn
```bash
yarn add @nan0web/ui-cli
```

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### CLIInputAdapter

–ê–¥–∞–ø—Ç–µ—Ä –º—ñ—Å—Ç–∏—Ç—å –º–µ—Ç–æ–¥–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–æ—Ä–º–∞–º–∏, –≤–≤—ñ–¥–Ω–∏–º–∏ —Ç–∞ –≤–∏–±—ñ—Ä–∫–æ–≤–∏–º–∏ –∑–∞–ø–∏—Ç–∞–º–∏.

#### `requestForm(form, options)`

–í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Ñ–æ—Ä–º—É —Ç–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –∑–±–∏—Ä–∞—î –≤–≤—ñ–¥ –ø–æ–ª—ñ–≤ –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é.

```js
import { UiForm } from '@nan0web/ui'
import { CLIInputAdapter } from '@nan0web/ui-cli'

const adapter = new CLIInputAdapter()

const fields = [
  { name: "name", label: "–ü–æ–≤–Ω–µ —ñ–º‚Äô—è", required: true },
  { name: "email", label: "Email", type: "email", required: true },
]

const validateValue = (name, value) => {
  if (name === "email" && !value.includes("@")) {
    return { isValid: false, errors: { email: "–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π email" } }
  }
  return { isValid: true, errors: {} }
}
const setData = (data) => {
  const newForm = { ...form }
  newForm.state = data
  return newForm
}
const form = UiForm.from({
  title: "–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞",
  fields,
  id: "user-profile-form",
  validateValue,
  setData,
  state: {},
  validate: () => ({ isValid: true, errors: {} }),
})

const result = await adapter.requestForm(form, { silent: true })

console.info(result.form.state) // ‚Üê { name: "John Doe", email: "John.Doe@example.com" }
```

#### `requestSelect(config)`

–ü–æ–∫–∞–∑—É—î —Å–ø–∏—Å–æ–∫ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±—Ä–∞–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç.

```js
import { CLIInputAdapter } from '@nan0web/ui-cli'

const adapter = new CLIInputAdapter()
const config = {
  title: "–í–∏–±–µ—Ä—ñ—Ç—å –º–æ–≤—É:",
  prompt: "–ú–æ–≤–∞ (1‚Äë2): ",
  id: "language-select",
  options: new Map([
    ["en", "English"],
    ["uk", "Ukrainian"],
  ]),
}

const result = await adapter.requestSelect(config)
console.info(result.value) // ‚Üê Message { body: "en", head: {} }
```

### –£—Ç–∏–ª—ñ—Ç–∏ –≤–≤–æ–¥—É

#### –ö–ª–∞—Å `Input`

–ó–±–µ—Ä—ñ–≥–∞—î –≤–≤–µ–¥–µ–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è —ñ –≤—ñ–¥—Å—Ç–µ–∂—É—î —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è.

```js
import { Input } from '@nan0web/ui-cli'

const input = new Input({ value: "test", stops: ["quit"] })
console.info(String(input))      // ‚Üê test
console.info(input.value)        // ‚Üê test
console.info(input.cancelled)    // ‚Üê false

input.value = "quit"
console.info(input.cancelled)    // ‚Üê true
```

#### `ask(question)`

–í–∏–≤–æ–¥–∏—Ç—å –ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å —É –≤–∏–≥–ª—è–¥—ñ –ø—Ä–æ–º—ñ—Å—É.

```js
import { ask } from "@nan0web/ui-cli"

const result = await ask("–Ø–∫–µ –≤–∞—à–µ —ñ–º‚Äô—è?")
console.info(result)
```

#### `createInput(stops)`

–°—Ç–≤–æ—Ä—é—î –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –≤–≤–æ–¥—ñ–≤ –∑—ñ —Å–ª–æ–≤–∞–º–∏‚Äë—Å—Ç–æ–ø–∞–º–∏.

```js
import { createInput } from '@nan0web/ui-cli'

const handler = createInput(["cancel"])
console.info(typeof handler === "function") // ‚Üê true
```

#### `select(config)`

–ü–æ–∫–∞–∑—É—î —Å–ø–∏—Å–æ–∫ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±—Ä–∞–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç.

```js
import { select } from '@nan0web/ui-cli'

const config = {
  title: "–û–±–µ—Ä—ñ—Ç—å –≤–∞—Ä—ñ–∞–Ω—Ç:",
  prompt: "–í–∏–±—ñ—Ä (1‚Äë3): ",
  options: ["–í–∞—Ä—ñ–∞–Ω—Ç A", "–í–∞—Ä—ñ–∞–Ω—Ç B", "–í–∞—Ä—ñ–∞–Ω—Ç C"],
  console: console,
}

const result = await select(config)
console.info(result.value)
```

#### `next(conf)`

–ß–µ–∫–∞—î –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–ª–∞–≤—ñ—à—ñ (–∞–±–æ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ –∫–ª–∞–≤—ñ—à) –¥–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É.

```js
import { next } from '@nan0web/ui-cli'

const result = await next()
console.info(typeof result === "string")
```

#### `pause(ms)`

–ü–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–æ–º—ñ—Å, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∑–∞–¥–∞–Ω–æ—ó –∑–∞—Ç—Ä–∏–º–∫–∏.

```js
import { pause } from '@nan0web/ui-cli'
const before = Date.now()
await pause(10)
const after = Date.now()
console.info(after - before >= 10) // ‚Üê true
```

### –ü–æ–º–∏–ª–∫–∏

#### `CancelError`

–í–∏–∫–∏–¥–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–µ—Ä–µ—Ä–∏–≤–∞—î –ø—Ä–æ—Ü–µ—Å.

```js
import { CancelError } from '@nan0web/ui-cli'

try {
  // ... –∫–æ–¥, —è–∫–∏–π –º–æ–∂–µ –±—É—Ç–∏ —Å–∫–∞—Å–æ–≤–∞–Ω–∏–π
} catch (err) {
  if (err instanceof CancelError) {
    console.error(err.message) // ‚Üê –û–ø–µ—Ä–∞—Ü—ñ—è —Å–∫–∞—Å–æ–≤–∞–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º
  }
}
```

## API

### `CLIInputAdapter`

- **–ú–µ—Ç–æ–¥–∏**
  - `requestForm(form, options)` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç —Ñ–æ—Ä–º–∏.
  - `requestSelect(config)` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç –≤–∏–±–æ—Ä—É.
  - `requestInput(config)` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç –æ–¥–∏–Ω–∏—á–Ω–æ–≥–æ –≤–≤–æ–¥—É.

### `Input`

- **–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ**
  - `value` ‚Äì (string) –ø–æ—Ç–æ—á–Ω–µ –≤–≤–µ–¥–µ–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è.
  - `stops` ‚Äì (array) –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞‚Äë—Å—Ç–æ–ø–∏.
  - `cancelled` ‚Äì (boolean) —á–∏ –±—É–ª–æ —Å–∫–∞—Å–æ–≤–∞–Ω–æ –≤–≤—ñ–¥.
- **–ú–µ—Ç–æ–¥–∏**
  - `toString()` ‚Äì –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è —è–∫ —Ä—è–¥–æ–∫.
  - `static from(input)` ‚Äì —Å—Ç–≤–æ—Ä—é—î —ñ–Ω—Å—Ç–∞–Ω—Å –∑ –æ–±‚Äô—î–∫—Ç–∞ –≤–≤–æ–¥—É.

### `ask(question)`

- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  - `question` (string) ‚Äì —Ç–µ–∫—Å—Ç –ø—ñ–¥–∫–∞–∑–∫–∏.
- **–ü–æ–≤–µ—Ä—Ç–∞—î**
  - `Promise<string>` ‚Äì –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

### `createInput(stops)`

- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  - `stops` (array) ‚Äì –∑–Ω–∞—á–µ–Ω–Ω—è, –ø—Ä–∏ —è–∫–∏—Ö –≤–≤—ñ–¥ —Å–∫–∞—Å–æ–≤—É—î—Ç—å—Å—è.
- **–ü–æ–≤–µ—Ä—Ç–∞—î**
  - —Ñ—É–Ω–∫—Ü—ñ—è‚Äë–æ–±—Ä–æ–±–Ω–∏–∫.

### `select(config)`

- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  - `config.title` (string) ‚Äì –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∏–±–æ—Ä—É.
  - `config.prompt` (string) ‚Äì –ø—ñ–¥–∫–∞–∑–∫–∞.
  - `config.options` (array | Map) ‚Äì –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤–∏–±–æ—Ä—É.
- **–ü–æ–≤–µ—Ä—Ç–∞—î**
  - `Promise<{ index, value }>` ‚Äì –æ–±—Ä–∞–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç.

### `next([conf])`

- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  - `conf` (string) ‚Äì –ø—Ä–∏–π–º–∞–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∫–ª–∞–≤—ñ—à.
- **–ü–æ–≤–µ—Ä—Ç–∞—î**
  - `Promise<string>` ‚Äì –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞ –∫–ª–∞–≤—ñ—à–∞.

### `pause(ms)`

- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**
  - `ms` (number) ‚Äì –∑–∞—Ç—Ä–∏–º–∫–∞ —É –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö.
- **–ü–æ–≤–µ—Ä—Ç–∞—î**
  - `Promise<void>`.

### `CancelError`

–†–æ–∑—à–∏—Ä—é—î `Error`, –≤–∏–∫–∏–¥–∞—î—Ç—å—Å—è –ø—Ä–∏ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—ñ –≤–≤–æ–¥—É.

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–£—Å—ñ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω—ñ –∫–ª–∞—Å–∏ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ–≤–∏–Ω–Ω—ñ –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –±–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏.

## JavaScript

–î–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `d.ts` (type‚Äëdefinition) —Ñ–∞–π–ª–∏.

## Playground

–Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç Playground?

```bash
# –ö–ª–æ–Ω—É—î–º–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —ñ –∑–∞–ø—É—Å–∫–∞—î–º–æ CLI playground
git clone https://github.com/nan0web/ui-cli.git
cd ui-cli
npm install
npm run playground
```

## –°–ø—ñ–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

–Ø–∫ –¥–æ–ª—É—á–∏—Ç–∏—Å—è? ‚Äì [–¥–∏–≤—ñ—Ç—å—Å—è —Ç—É—Ç](./CONTRIBUTING.md)

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

–Ø–∫ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ —É —Ñ–∞–π–ª—ñ –ª—ñ—Ü–µ–Ω–∑—ñ—ó ISC ‚Äì [–¥–∏–≤—ñ—Ç—å—Å—è —Ç—É—Ç](./LICENSE)
